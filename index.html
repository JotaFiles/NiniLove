<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nini ‚ù§Ô∏è Jota - Nuestro Amor</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-pink: #ff6b9d;
            --secondary-pink: #ffc1cc;
            --accent-blue: #4ecdc4;
            --light-pink: #fff0f3;
            --dark-text: #2d3436;
            --medium-text: #636e72;
            --white: #ffffff;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-4: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            --gradient-5: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            --shadow-light: 0 4px 20px rgba(255, 107, 157, 0.15);
            --shadow-medium: 0 8px 30px rgba(255, 107, 157, 0.2);
            --shadow-heavy: 0 15px 40px rgba(255, 107, 157, 0.3);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffeef8 0%, #f0f8ff 50%, #fff0f8 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            animation: float-heart 15s linear infinite;
            opacity: 0;
        }

        @keyframes float-heart {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            5% { opacity: 0.6; }
            95% { opacity: 0.6; }
            100% { transform: translateY(-20vh) rotate(360deg); opacity: 0; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header-content {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            box-shadow: var(--shadow-light);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            background: var(--gradient-2);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .connection-status {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            font-size: 0.9rem;
            background: rgba(0, 184, 148, 0.1);
            color: #00b894;
            border: 1px solid rgba(0, 184, 148, 0.2);
        }

        .connection-status.offline {
            background: rgba(255, 87, 87, 0.1);
            color: #d63031;
            border: 1px solid rgba(255, 87, 87, 0.2);
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-light);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        /* ===== ESTILOS PARA RETOS DIARIOS ===== */
        .challenge-container {
            background: var(--gradient-5);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: var(--shadow-medium);
            position: relative;
            overflow: hidden;
        }

        .challenge-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: sparkle 20s linear infinite;
            pointer-events: none;
        }

        @keyframes sparkle {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(20px) translateY(20px); }
        }

        .challenge-header {
            position: relative;
            z-index: 2;
        }

        .challenge-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .challenge-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--dark-text);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .challenge-text {
            font-size: 1.1rem;
            color: var(--dark-text);
            margin-bottom: 20px;
            font-style: italic;
            line-height: 1.4;
            font-weight: 500;
        }

        .challenge-date {
            font-size: 0.9rem;
            color: var(--medium-text);
            background: rgba(255, 255, 255, 0.7);
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 20px;
        }

        .upload-section {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .file-upload-challenge {
            position: relative;
            display: inline-block;
            width: 100%;
            margin-bottom: 15px;
        }

        .file-upload-challenge input[type="file"] {
            display: none;
        }

        .file-upload-challenge-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            padding: 15px;
            background: var(--gradient-3);
            color: white;
            text-align: center;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: var(--shadow-light);
            border: 2px dashed rgba(255, 255, 255, 0.5);
        }

        .file-upload-challenge-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .upload-preview {
            margin-top: 15px;
            text-align: center;
        }

        .upload-preview img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 12px;
            box-shadow: var(--shadow-light);
        }

        .challenge-photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .challenge-photo-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .challenge-photo-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .challenge-photo-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .challenge-photo-info {
            padding: 15px;
        }

        .challenge-photo-challenge {
            font-size: 0.9rem;
            color: var(--primary-pink);
            font-weight: 600;
            margin-bottom: 8px;
            font-style: italic;
        }

        .challenge-photo-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .challenge-photo-author {
            font-weight: 600;
            color: var(--accent-blue);
            font-size: 0.9rem;
        }

        .challenge-photo-date {
            font-size: 0.8rem;
            color: var(--medium-text);
            background: rgba(255, 107, 157, 0.1);
            padding: 4px 8px;
            border-radius: 8px;
        }

        /* Filtros para la galer√≠a */
        .gallery-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 107, 157, 0.1);
            color: var(--primary-pink);
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--gradient-2);
            color: white;
            transform: translateY(-1px);
            box-shadow: var(--shadow-light);
        }

        .clock-section {
            text-align: center;
        }

        .clock-display {
            background: var(--gradient-2);
            color: white;
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-medium);
        }

        .clock {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .date {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .love-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(255, 107, 157, 0.1);
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid var(--primary-pink);
        }

        .stat-number {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-pink);
            display: block;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--medium-text);
            margin-top: 5px;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            color: var(--primary-pink);
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }

        /* ===== ESTILOS DEL CALENDARIO OPTIMIZADO PARA M√ìVIL ===== */
        .calendar-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .calendar-nav-btn {
            background: var(--gradient-3);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
        }

        .calendar-nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .calendar-month-year {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-pink);
            min-width: 200px;
            text-align: center;
        }

        .calendar-turn-info {
            background: var(--gradient-4);
            color: var(--dark-text);
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 500;
            white-space: nowrap;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            color: var(--medium-text);
            padding: 10px 5px;
            font-size: 0.9rem;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 107, 157, 0.1);
            min-height: 40px;
        }

        .calendar-day:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-light);
        }

        .calendar-day.other-month {
            color: #ccc;
            background: rgba(255, 255, 255, 0.2);
        }

        .calendar-day.today {
            background: var(--gradient-2);
            color: white;
            font-weight: 700;
            box-shadow: var(--shadow-medium);
        }

        .calendar-day.has-phrase {
            background: var(--gradient-4);
            color: var(--dark-text);
            font-weight: 600;
        }

        .calendar-day.has-phrase::after {
            content: 'üíï';
            position: absolute;
            bottom: 2px;
            right: 2px;
            font-size: 0.7rem;
        }

        .calendar-day.nini-turn {
            border: 2px solid var(--primary-pink);
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1) 0%, rgba(255, 107, 157, 0.3) 100%);
        }

        .calendar-day.jota-turn {
            border: 2px solid var(--accent-blue);
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1) 0%, rgba(78, 205, 196, 0.3) 100%);
        }

        .phrase-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .phrase-modal.show {
            display: flex;
        }

        .phrase-modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: var(--shadow-heavy);
            transform: scale(0.9);
            transition: all 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        .phrase-modal.show .phrase-modal-content {
            transform: scale(1);
        }

        .phrase-modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .phrase-modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            color: var(--primary-pink);
            margin-bottom: 10px;
        }

        .phrase-modal-date {
            color: var(--medium-text);
            font-size: 0.9rem;
        }

        .phrase-modal-turn {
            background: var(--gradient-4);
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .phrase-form {
            margin-bottom: 20px;
        }

        .phrase-display {
            background: rgba(255, 107, 157, 0.1);
            padding: 15px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-pink);
            margin-bottom: 15px;
        }

        .phrase-text {
            font-style: italic;
            color: var(--dark-text);
            margin-bottom: 8px;
        }

        .phrase-author {
            font-size: 0.85rem;
            color: var(--medium-text);
            text-align: right;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 12px;
            background: rgba(255, 107, 157, 0.05);
            border: 2px solid rgba(255, 107, 157, 0.1);
            font-family: 'Poppins', sans-serif;
            font-size: 0.95rem;
            color: var(--dark-text);
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-pink);
            background: rgba(255, 107, 157, 0.1);
            box-shadow: var(--shadow-light);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-upload-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--gradient-3);
            color: white;
            text-align: center;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            box-shadow: var(--shadow-light);
        }

        .file-upload-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-medium);
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 20px;
            background: var(--gradient-2);
            color: white;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            font-size: 0.9rem;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: var(--gradient-3);
        }

        .btn-close {
            background: #95a5a6;
            width: auto;
            padding: 8px 15px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .modal-actions .btn {
            flex: 1;
            min-width: 120px;
        }

        .content-grid {
            display: grid;
            gap: 15px;
        }

        .content-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 15px;
            border-left: 4px solid var(--primary-pink);
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .content-item:hover {
            transform: translateX(3px);
            box-shadow: var(--shadow-medium);
        }

        .content-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .content-author {
            font-weight: 600;
            color: var(--primary-pink);
            font-size: 0.9rem;
        }

        .content-time {
            font-size: 0.75rem;
            color: var(--medium-text);
            background: rgba(255, 107, 157, 0.1);
            padding: 4px 8px;
            border-radius: 8px;
        }

        .content-text {
            color: var(--dark-text);
            line-height: 1.5;
            font-style: italic;
            font-size: 0.9rem;
        }

        .memory-image {
            width: 100%;
            max-height: 250px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-light);
        }

        .loading {
            text-align: center;
            color: var(--primary-pink);
            font-style: italic;
            padding: 30px 15px;
        }

        .error {
            background: rgba(255, 87, 87, 0.1);
            color: #d63031;
            padding: 12px;
            border-radius: 12px;
            border-left: 4px solid #d63031;
            margin-bottom: 15px;
        }

        .success {
            background: rgba(0, 184, 148, 0.1);
            color: #00b894;
            padding: 12px;
            border-radius: 12px;
            border-left: 4px solid #00b894;
            margin-bottom: 15px;
        }

        .empty-state {
            text-align: center;
            color: var(--medium-text);
            font-style: italic;
            padding: 30px 15px;
            background: rgba(255, 107, 157, 0.05);
            border-radius: 15px;
            border: 2px dashed rgba(255, 107, 157, 0.2);
        }

        /* ===== OPTIMIZACIONES ESPEC√çFICAS PARA M√ìVIL ===== */
        @media (max-width: 768px) {
            .container { 
                padding: 8px; 
            }
            
            .header h1 { 
                font-size: 2rem; 
            }
            
            .header-content {
                padding: 20px 15px;
            }
            
            .card { 
                padding: 15px;
                margin-bottom: 20px;
            }
            
            .clock { 
                font-size: 1.6rem; 
            }
            
            .clock-display {
                padding: 12px;
            }
            
            .love-stats { 
                grid-template-columns: repeat(2, 1fr); 
                gap: 10px; 
            }
            
            .stat-item {
                padding: 10px;
            }
            
            .stat-number {
                font-size: 1.1rem;
            }
            
            .section-title {
                font-size: 1.5rem;
                margin-bottom: 15px;
            }

            /* Retos diarios en m√≥vil */
            .challenge-container {
                padding: 20px 15px;
            }
            
            .challenge-icon {
                font-size: 2.5rem;
            }
            
            .challenge-title {
                font-size: 1.5rem;
            }
            
            .challenge-text {
                font-size: 1rem;
            }
            
            .challenge-photo-gallery {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 15px;
            }
            
            .gallery-filters {
                gap: 8px;
            }
            
            .filter-btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            /* Optimizaciones espec√≠ficas del calendario para m√≥vil */
            .calendar-container {
                padding: 15px;
                margin: 0 -5px;
            }
            
            .calendar-header {
                flex-direction: column;
                gap: 12px;
                margin-bottom: 20px;
            }
            
            .calendar-nav {
                order: 1;
                gap: 20px;
            }
            
            .calendar-nav-btn {
                width: 45px;
                height: 45px;
                font-size: 1.4rem;
            }
            
            .calendar-month-year {
                order: 2;
                font-size: 1.2rem;
                min-width: auto;
            }
            
            .calendar-turn-info {
                order: 3;
                text-align: center;
                white-space: normal;
                line-height: 1.3;
                padding: 10px 12px;
                font-size: 0.8rem;
            }
            
            .calendar-grid {
                gap: 3px;
                margin-bottom: 15px;
            }
            
            .calendar-day-header {
                font-size: 0.75rem;
                padding: 8px 2px;
                font-weight: 700;
            }
            
            .calendar-day {
                font-size: 0.8rem;
                min-height: 35px;
                border-radius: 8px;
                font-weight: 600;
            }
            
            .calendar-day.has-phrase::after {
                font-size: 0.6rem;
                bottom: 1px;
                right: 1px;
            }
            
            /* Modal optimizado para m√≥vil */
            .phrase-modal {
                padding: 10px;
                align-items: flex-start;
                padding-top: 20px;
            }
            
            .phrase-modal-content {
                padding: 20px 15px;
                margin: 0;
                width: 100%;
                max-width: none;
                border-radius: 15px;
                max-height: 85vh;
            }
            
            .phrase-modal-title {
                font-size: 1.3rem;
            }
            
            .phrase-modal-date {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .phrase-modal-turn {
                padding: 8px 12px;
                font-size: 0.85rem;
            }
            
            .form-input, .form-select, .form-textarea {
                padding: 10px;
                font-size: 0.9rem;
            }
            
            .form-textarea {
                min-height: 70px;
            }
            
            .modal-actions {
                flex-direction: column;
                gap: 8px;
            }
            
            .modal-actions .btn {
                width: 100%;
                min-width: auto;
                padding: 12px;
            }
            
            /* Otros elementos m√≥viles */
            .content-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .memory-image {
                max-height: 200px;
            }
        }

        /* ===== OPTIMIZACIONES PARA PANTALLAS MUY PEQUE√ëAS ===== */
        @media (max-width: 480px) {
            .container {
                padding: 5px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .love-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .stat-number {
                font-size: 1rem;
            }
            
            .stat-label {
                font-size: 0.7rem;
            }
            
            .challenge-photo-gallery {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .calendar-container {
                padding: 10px;
                margin: 0 -2px;
            }
            
            .calendar-day {
                min-height: 32px;
                font-size: 0.75rem;
            }
            
            .calendar-day-header {
                font-size: 0.7rem;
                padding: 6px 1px;
            }
            
            .calendar-nav-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            
            .calendar-month-year {
                font-size: 1.1rem;
            }
            
            .phrase-modal-content {
                padding: 15px 12px;
            }
        }

        /* ===== OPTIMIZACIONES PARA LANDSCAPE EN M√ìVIL ===== */
        @media (max-width: 768px) and (orientation: landscape) {
            .phrase-modal {
                padding-top: 10px;
            }
            
            .phrase-modal-content {
                max-height: 95vh;
            }
            
            .calendar-day {
                min-height: 30px;
            }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease forwards;
        }
        .image-modal {
    display: none;
    position: fixed;
    z-index: 20000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(5px);
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.image-modal.show {
    display: flex;
}

.image-modal-content {
    max-width: 90%;
    max-height: 80%;
    border-radius: 15px;
    box-shadow: var(--shadow-heavy);
    object-fit: contain;
}

.image-modal-close {
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 2rem;
    color: white;
    cursor: pointer;
    font-weight: bold;
}
.image-modal-actions {
    margin-top: 15px;
    text-align: center;
}
.image-modal-actions a {
    background: var(--gradient-2);
    color: white;
    padding: 10px 18px;
    border-radius: 10px;
    font-weight: 600;
    text-decoration: none;
    box-shadow: var(--shadow-light);
}
.image-modal-actions a:hover {
    box-shadow: var(--shadow-medium);
    transform: translateY(-2px);
}
/* Overlay oscuro */
.overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

/* Caja blanca del modal */
.overlay-modal {
  position: relative;
  background: #ffffff;
  padding: 20px;
  border-radius: 15px;
  max-width: 90vw;
  max-height: 90vh;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Imagen grande */
.overlay-img {
  max-width: 85vw;
  max-height: 70vh;
  border-radius: 10px;
  margin-bottom: 15px;
}

/* Bot√≥n de descarga */
.download-link {
  color: #ffffff;
  background: #ff6b9d;
  padding: 10px 20px;
  border-radius: 10px;
  text-decoration: none;
  font-weight: bold;
  transition: background 0.2s ease;
}

.download-link:hover {
  background: #e85c89;
}

/* Bot√≥n de Cerrar (X) */
.close-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #ff6b9d;
  border: none;
  color: white;
  font-size: 18px;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  cursor: pointer;
  line-height: 30px;
  text-align: center;
}

.close-btn:hover {
  background: #e85c89;
}

        /* ===== MEJORAS ADICIONALES PARA TOUCH ===== */
        @media (pointer: coarse) {
            .calendar-day {
                min-height: 44px; /* Tama√±o m√≠nimo recomendado para touch */
            }
            
            .calendar-nav-btn {
                min-width: 44px;
                min-height: 44px;
            }
            
            .btn {
                min-height: 44px;
                padding: 12px 20px;
            }
            /* ===== MODAL DE IM√ÅGENES PARA RETOS ===== */



        }
    </style>
</head>
<body>
    <div id="overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:9999;">
  <div style="text-align:center">
    <img id="overlay-image" src="" style="max-width:90vw; max-height:80vh; border-radius:10px;">
    <a id="download-btn" href="" download style="display:block; margin-top:15px; color:white; font-size:18px;">Descargar imagen</a>
  </div>
</div>

    <div class="animated-bg" id="animatedBg"></div>
    
    <div class="container">
        <header class="header fade-in">
            <div class="header-content">
                <div id="connectionStatus" class="connection-status">
                    üîÑ Configurando conexi√≥n...
                </div>
                <img src="https://i.gifer.com/origin/36/36bcb36e9832e37c993063a41da0fbc4_w200.gif" alt="Descripci√≥n" style="display:block;margin:0 auto;width:150px;height:auto;border-radius:12px;">

                <h1>Nini ‚ù§Ô∏è Jota</h1>
                <p>Nuestro espacio de amor uwu</p>
            </div>
        </header>

        <!-- Secci√≥n del reloj -->
        <div class="card fade-in">
            <div class="clock-section">
                <div class="clock-display">
                    <div class="clock" id="clock">00:00:00</div>
                    <div class="date" id="date">Cargando fecha...</div>
                </div>
                
                <div class="love-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="daysTogether">0</span>
                        <span class="stat-label">D√≠as juntos</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalMemories">0</span>
                        <span class="stat-label">Recuerdos</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalMessages">0</span>
                        <span class="stat-label">Mensajes</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalPhrases">0</span>
                        <span class="stat-label">Frases del d√≠a</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="totalChallenges">0</span>
                        <span class="stat-label">Retos completados</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- NUEVA SECCI√ìN: RETO DIARIO CON FOTOS -->
        <div class="card fade-in">
            <h2 class="section-title">üéØ Reto Diario con Fotos</h2>
            
            <div class="challenge-container" id="challengeContainer">
                <div class="challenge-header">
                    <span class="challenge-icon" id="challengeIcon">üì∏</span>
                    <h3 class="challenge-title">Reto del D√≠a</h3>
                    <div class="challenge-date" id="challengeDate">Cargando fecha...</div>
                    <div class="challenge-text" id="challengeText">Cargando reto del d√≠a...</div>
                </div>
                
                <div class="upload-section">
                    <div class="form-group">
                        <select class="form-select" id="challengeAuthor">¬¨
                            <option value="Nini">üíñ Nini</option>
                            <option value="Jota">üíô Jota</option>
                        </select>
                    </div>
                    
                    <div class="file-upload-challenge">
    <input type="file" id="challengePhoto" accept="image/*" capture="environment">
    <label for="challengePhoto" class="file-upload-challenge-btn">
        <span>üì∏</span>
        <span>Subir foto para el reto</span>
    </label>
</div>

                    
                    <div class="upload-preview" id="uploadPreview"></div>
                    
                    <button class="btn" onclick="LoveApp.uploadChallengePhoto()" id="uploadChallengeBtn">
                        ‚ú® Completar Reto
                    </button>
                </div>
            </div>

            
            <!-- Filtros para la galer√≠a -->
            <div class="gallery-filters">
                <button class="filter-btn active" onclick="LoveApp.filterChallengePhotos('all')">Todos</button>
                <button class="filter-btn" onclick="LoveApp.filterChallengePhotos('Nini')">üíñ Nini</button>
                <button class="filter-btn" onclick="LoveApp.filterChallengePhotos('Jota')">üíô Jota</button>
                <button class="filter-btn" onclick="LoveApp.filterChallengePhotos('recent')">Recientes</button>
            </div>
            
            <!-- Galer√≠a de fotos de retos -->
            <div class="challenge-photo-gallery" id="challengePhotoGallery">
                <div class="loading">Cargando fotos de retos... üì∏</div>
            </div>
        </div>

        <!-- Secci√≥n del calendario -->
        <div class="card fade-in">
            <h2 class="section-title">üìÖ Calendario de Frases del D√≠a</h2>
            
            <div class="calendar-container">
                <div class="calendar-header">
                    <div class="calendar-nav">
                        <button class="calendar-nav-btn" onclick="LoveApp.changeMonth(-1)">‚Äπ</button>
                        <div class="calendar-month-year" id="calendarMonthYear">Enero 2024</div>
                        <button class="calendar-nav-btn" onclick="LoveApp.changeMonth(1)">‚Ä∫</button>
                    </div>
                    <div class="calendar-turn-info" id="calendarTurnInfo">
                        üåü Hoy le toca a: Cargando...
                    </div>
                </div>
                
                <div class="calendar-grid" id="calendarGrid">
                    <div class="calendar-day-header">Dom</div>
                    <div class="calendar-day-header">Lun</div>
                    <div class="calendar-day-header">Mar</div>
                    <div class="calendar-day-header">Mi√©</div>
                    <div class="calendar-day-header">Jue</div>
                    <div class="calendar-day-header">Vie</div>
                    <div class="calendar-day-header">S√°b</div>
                </div>
            </div>
        </div>

        <!-- Secci√≥n de mensajes de amor -->
        <div class="card fade-in">
            <h2 class="section-title">üíå Mensajes de Amor</h2>
            
            <div class="form-group">
                <select class="form-select" id="messageAuthor">
                    <option value="Nini">üíñ Nini</option>
                    <option value="Jota">üíô Jota</option>
                </select>
            </div>
            
            <div class="form-group">
                <textarea class="form-textarea" id="messageText" 
                         placeholder="Escribe un mensaje bonito para tu amor..." maxlength="500"></textarea>
            </div>
            
            <button class="btn" onclick="LoveApp.addMessage()" id="addMessageBtn">
                ‚ú® Enviar Mensaje
            </button>
            
            <div class="content-grid" id="messagesList" style="margin-top: 25px;">
                <div class="loading">Cargando mensajes de amor... üíï</div>
            </div>
        </div>

        <!-- Secci√≥n de recuerdos -->
        <div class="card fade-in">
            <h2 class="section-title">üì∏ Galer√≠a de Recuerdos</h2>
            
            <div class="form-group">
                <select class="form-select" id="memoryAuthor">
                    <option value="Nini">üíñ Nini</option>
                    <option value="Jota">üíô Jota</option>
                </select>
            </div>
            
            <div class="form-group">
                <input type="text" class="form-input" id="memoryTitle" 
                       placeholder="T√≠tulo del recuerdo..." maxlength="100">
            </div>
            
            <div class="form-group">
                <div class="file-upload">
                    <input type="file" id="memoryImage" accept="image/*">
                    <label for="memoryImage" class="file-upload-btn">
                        üì∑ Subir Imagen
                    </label>
                </div>
            </div>
            
            <button class="btn" onclick="LoveApp.addMemory()" id="addMemoryBtn">
                ‚ú® Guardar Recuerdo
            </button>
            
            <div class="content-grid" id="memoriesGrid" style="margin-top: 25px;">
                <div class="loading">Cargando recuerdos... üíï</div>
            </div>
        </div>
    </div>

    <!-- Modal para frases del d√≠a -->
    <div class="phrase-modal" id="phraseModal">
        <div class="phrase-modal-content">
            <div class="phrase-modal-header">
                <div class="phrase-modal-title" id="phraseModalTitle">Frase del D√≠a</div>
                <div class="phrase-modal-date" id="phraseModalDate">Fecha</div>
            </div>
            
            <div class="phrase-modal-turn" id="phraseModalTurn">
                Es el turno de: Cargando...
            </div>
            
            <div id="phraseDisplay" style="display: none;"></div>
            
            <div id="phraseForm" class="phrase-form">
                <div class="form-group">
                    <textarea class="form-textarea" id="phraseText" 
                             placeholder="Escribe una frase bonita para este d√≠a..." maxlength="300"></textarea>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn" onclick="LoveApp.saveDailyPhrase()" id="savePhraseBtn">
                    ‚ú® Guardar Frase
                </button>
                <button class="btn btn-close" onclick="LoveApp.closePhraseModal()">
                    Cerrar
                </button>
            </div>
            <!-- Modal para fotos de retos -->


        </div>
    </div>

    <!-- Incluir Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // ===== APLICACI√ìN PRINCIPAL =====
        const LoveApp = {
            // Configuraci√≥n de Supabase
            supabase: null,
            isConnected: false,
            
            // Datos
            messages: [],
            memories: [],
            dailyPhrases: [],
            challengePhotos: [],
            
            // Fecha de inicio de la relaci√≥n
            relationshipStart: new Date('2024-10-20'),
            
            // Estado del calendario
            currentDate: new Date(),
            selectedDate: null,
            
            // Estado del filtro de retos
            currentFilter: 'all',
            
            // Base de datos de retos diarios (30+ retos √∫nicos)
           dailyChallenges: [
    { icon: 'üß¶', text: 'T√≥mate una foto con tus calcetines m√°s divertidos' },
    { icon: 'üï∂Ô∏è', text: 'Foto usando tus gafas (de sol o normales)' },
    { icon: 'ü™û', text: 'Selfie frente al espejo con una pose divertida' },
    { icon: 'üß¢', text: 'Foto usando una gorra o sombrero que tengas' },
    { icon: 'üß•', text: 'Foto con tu chaqueta o su√©ter favorito' },
    { icon: 'üëü', text: 'T√≥mate una foto mostrando tus zapatos o zapatillas' },
    { icon: 'üõèÔ∏è', text: 'Foto abrazando tu almohada o manta favorita' },
    { icon: 'üìö', text: 'Selfie con un libro que tengas a la mano' },
    { icon: '‚òï', text: 'Foto sosteniendo tu taza o vaso favorito' },
    { icon: 'üç´', text: 'Selfie mientras comes un snack que tengas en casa' },
    { icon: 'üéß', text: 'Foto escuchando m√∫sica con tus auriculares' },
    { icon: 'üíÑ', text: 'Foto usando alg√∫n accesorio de maquillaje o joya' },
    { icon: 'üì±', text: 'Selfie mostrando tu tel√©fono o lo que est√©s viendo en √©l' },
    { icon: 'üñäÔ∏è', text: 'Foto con algo que est√©s escribiendo o dibujando' },
    { icon: 'üß¥', text: 'Foto usando crema, perfume o algo de tu tocador' },
    { icon: 'ü™•', text: 'Selfie con tu cepillo de dientes o en tu rutina ma√±anera' },
    { icon: 'üõãÔ∏è', text: 'Foto en tu lugar favorito de casa' },
    { icon: 'üéΩ', text: 'Selfie usando ropa deportiva aunque sea solo para la foto' },
    { icon: 'üß¶üß§', text: 'Foto combinando accesorios como guantes, bufandas o calcetines' },
    { icon: 'üßÉ', text: 'Selfie con tu bebida del d√≠a' },
    { icon: 'üõí', text: 'Foto con algo que compraste recientemente' },
    { icon: 'ü™ë', text: 'Foto sentado en tu silla favorita' },
    { icon: 'üñºÔ∏è', text: 'Selfie con algo que tengas colgado en la pared' },
    { icon: 'üé®', text: 'Foto mostrando algo que hayas dibujado o pintado' },
    { icon: 'üß∏', text: 'Foto abrazando un peluche o mu√±eco que tengas' },
    { icon: 'üßÇ', text: 'Selfie con tu snack o condimento favorito' },
    { icon: 'üñºÔ∏è', text: 'Foto con un cuadro o decoraci√≥n de tu casa' },
    { icon: 'üßµ', text: 'Foto con algo que est√©s cosiendo o arreglando' },
    { icon: 'üõèÔ∏è', text: 'Selfie desde tu cama o tu lugar de descanso' },
    { icon: 'üßΩ', text: 'Foto con algo que est√©s limpiando o usando para limpiar' },
    { icon: 'üï∞Ô∏è', text: 'Selfie con un reloj o algo que indique la hora' },
    { icon: 'ü™ü', text: 'Foto mirando por una ventana' },
    { icon: 'üñ•Ô∏è', text: 'Selfie frente a tu computadora o laptop' },
    { icon: 'üì¶', text: 'Foto con una caja o paquete que tengas en casa' },
    { icon: 'üß∂', text: 'Foto con hilo, lana o algo que uses para manualidades' },
    { icon: 'üõçÔ∏è', text: 'Selfie con una bolsa de compras o un paquete' },
    { icon: 'üßπ', text: 'Foto haciendo algo de limpieza o con una escoba' },
    { icon: 'üõÅ', text: 'Selfie con tus productos de ba√±o favoritos' },
    { icon: 'üõèÔ∏è', text: 'Foto saltando en tu cama o haciendo una pose divertida' },
    { icon: 'üéß', text: 'Foto escuchando m√∫sica y bailando un poco' },
    { icon: 'üßΩ', text: 'Foto con algo que est√©s limpiando o lavando' },
    { icon: 'üß¥', text: 'Selfie aplicando crema o loci√≥n' },
    { icon: 'üñºÔ∏è', text: 'Foto con tu decoraci√≥n favorita de casa' },
    { icon: 'üß¶', text: 'Selfie mostrando calcetines combinados o diferentes' },
    { icon: 'ü™ë', text: 'Foto sentado de manera divertida en tu silla' },
    { icon: 'üìö', text: 'Selfie mientras hojeas un libro o revista' },
    { icon: 'üõãÔ∏è', text: 'Foto recostado o sentado en tu sof√° favorito' },
    { icon: 'üß¢', text: 'Selfie con tu gorra puesta de forma graciosa' },
    { icon: 'üéΩ', text: 'Foto con tu ropa m√°s c√≥moda de casa' },
    { icon: 'üß∏', text: 'Selfie abrazando algo blando o c√≥modo' },
    { icon: 'üçΩÔ∏è', text: 'Foto comiendo tu snack o comida favorita' },
    { icon: 'üõí', text: 'Selfie con algo que compraste hoy' },
    { icon: 'üñäÔ∏è', text: 'Foto escribiendo una nota o garabateando algo divertido' },
    { icon: 'üñºÔ∏è', text: 'Selfie con un cuadro o poster que te guste' },
    { icon: 'ü™û', text: 'Foto jugando con reflejos en el espejo' },
    { icon: 'üé®', text: 'Selfie mientras haces un garabato o dibujo r√°pido' },
    { icon: 'üß¶üß§', text: 'Foto con tus accesorios m√°s coloridos' }
],

            
            
            // ===== FUNCIONES DE FECHA CON ZONA HORARIA DE CHILE =====
            getChileDate() {
                // Crear fecha en zona horaria de Chile (UTC-3 o UTC-4 dependiendo del horario de verano)
                const now = new Date();
                const chileOffset = -3; // Chile est√° en UTC-3 la mayor parte del a√±o
                const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                const chileTime = new Date(utc + (chileOffset * 3600000));
                return chileTime;
            },
            
            formatDateChile(date) {
                // Asegurar que usamos la zona horaria de Chile
                return new Date(date.getTime() - (date.getTimezoneOffset() * 60000))
                    .toISOString().split('T')[0];
            },
            
            isSameDay(date1, date2) {
                // Comparar fechas usando zona horaria de Chile
                return this.formatDateChile(date1) === this.formatDateChile(date2);
            },
            
            // ===== FUNCIONES DE RETOS DIARIOS =====
            getTodayChallenge() {
                const today = this.getChileDate();
                const daysSinceStart = Math.floor((today - this.relationshipStart) / (1000 * 60 * 60 * 24));
                const challengeIndex = daysSinceStart % this.dailyChallenges.length;
                return this.dailyChallenges[challengeIndex];
            },
            
            updateChallengeDisplay() {
                const today = this.getChileDate();
                const challenge = this.getTodayChallenge();
                
                document.getElementById('challengeIcon').textContent = challenge.icon;
                document.getElementById('challengeText').textContent = challenge.text;
                document.getElementById('challengeDate').textContent = today.toLocaleDateString('es-CL', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            },
            
            // ===== INICIALIZACI√ìN =====
            async init() {
                console.log('üöÄ Iniciando aplicaci√≥n de amor...');
                console.log('üá®üá± Configurado para zona horaria de Chile (Calama)');
                
                // Mostrar instrucciones de configuraci√≥n
                this.showSetupInstructions();
                
                // Crear fondo animado
                this.createAnimatedBackground();
                
                // Inicializar reloj
                this.updateClock();
                setInterval(() => this.updateClock(), 1000);
                
                // Actualizar reto del d√≠a
                this.updateChallengeDisplay();
                
                // Inicializar efectos
                setInterval(() => this.createFloatingHeart(), 5000);
                
                // Configurar preview de imagen
                this.setupImagePreview();
                
                // Intentar conectar a Supabase
                await this.initializeSupabase();
                
                // Inicializar calendario
                this.renderCalendar();
                
                // Agregar animaciones de entrada
                this.addEntryAnimations();
                
                console.log('‚úÖ Aplicaci√≥n inicializada');
            },
            
            setupImagePreview() {
                const challengeInput = document.getElementById('challengePhoto');
                const previewContainer = document.getElementById('uploadPreview');
                
                challengeInput.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            previewContainer.innerHTML = `
                                <img src="${e.target.result}" alt="Preview" style="max-width: 200px; max-height: 200px; border-radius: 12px; box-shadow: var(--shadow-light);">
                                <p style="margin-top: 10px; color: var(--medium-text); font-size: 0.9rem;">¬°Foto lista para subir! üì∏</p>
                            `;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        previewContainer.innerHTML = '';
                    }
                });
            },
            
            // ===== CONFIGURACI√ìN DE SUPABASE =====
            async initializeSupabase() {
                // INSTRUCCIONES: Reemplaza estas variables con los valores de tu proyecto Supabase
                const SUPABASE_URL = 'https://qumdmfeamvtrevcjfjvl.supabase.co';
                const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1bWRtZmVhbXZ0cmV2Y2pmanZsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzMjY4MDYsImV4cCI6MjA2OTkwMjgwNn0.I8RxHA63ZmTukDeV3h2F8pv0Z8JZ7B7sHOubI0hUOKk';
                
                // Verificar si las variables est√°n configuradas
                if (SUPABASE_URL.includes('tu-proyecto') || SUPABASE_ANON_KEY.includes('tu-anon-key')) {
                    this.updateConnectionStatus('‚ö†Ô∏è Necesitas configurar las credenciales de Supabase', false);
                    return;
                }
                
                try {
                    this.updateConnectionStatus('üîÑ Conectando a Supabase...', false);
                    
                    // Inicializar cliente
                    this.supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    
                    // Verificar conexi√≥n
                    const { data, error } = await this.supabase
                        .from('love_messages')
                        .select('count', { count: 'exact', head: true });
                    
                    if (error) {
                        console.error('Error verificando conexi√≥n:', error);
                        throw new Error('Error de conexi√≥n. Verifica las credenciales.');
                    }
                    
                    this.isConnected = true;
                    this.updateConnectionStatus('‚úÖ Conectado - Sincronizaci√≥n en tiempo real activada', true);
                    
                    // Cargar datos iniciales
                    await this.loadAllData();
                    
                    // Configurar actualizaciones en tiempo real
                    this.setupRealtimeSubscriptions();
                    
                    console.log('‚úÖ Supabase conectado correctamente');
                    
                } catch (error) {
                    console.error('‚ùå Error conectando a Supabase:', error);
                    this.updateConnectionStatus('‚ùå Error de conexi√≥n - Revisa la configuraci√≥n', false);
                    this.showMessage('‚ùå Error conectando a Supabase. Revisa la configuraci√≥n.', 'error');
                }
            },
            
            // ===== SUSCRIPCIONES EN TIEMPO REAL =====
            setupRealtimeSubscriptions() {
                // Suscribirse a mensajes
                this.supabase
                    .channel('love_messages_channel')
                    .on('postgres_changes', 
                        { event: '*', schema: 'public', table: 'love_messages' }, 
                        (payload) => {
                            console.log('üîÑ Cambio en mensajes:', payload);
                            this.loadMessages();
                        }
                    )
                    .subscribe();

                // Suscribirse a recuerdos
                this.supabase
                    .channel('love_memories_channel')
                    .on('postgres_changes', 
                        { event: '*', schema: 'public', table: 'love_memories' }, 
                        (payload) => {
                            console.log('üîÑ Cambio en recuerdos:', payload);
                            this.loadMemories();
                        }
                    )
                    .subscribe();

                // Suscribirse a frases diarias
                this.supabase
                    .channel('daily_phrases_channel')
                    .on('postgres_changes', 
                        { event: '*', schema: 'public', table: 'daily_phrases' }, 
                        (payload) => {
                            console.log('üîÑ Cambio en frases diarias:', payload);
                            this.loadDailyPhrases();
                        }
                    )
                    .subscribe();

                // Suscribirse a fotos de retos
                this.supabase
                    .channel('fotos_retos_channel')
                    .on('postgres_changes', 
                        { event: '*', schema: 'public', table: 'fotos_retos' }, 
                        (payload) => {
                            console.log('üîÑ Cambio en fotos de retos:', payload);
                            this.loadChallengePhotos();
                        }
                    )
                    .subscribe();

                console.log('üî¥ Suscripciones en tiempo real configuradas');
            },
            
            // ===== CARGA DE DATOS =====
            async loadAllData() {
                await Promise.all([
                    this.loadMessages(),
                    this.loadMemories(),
                    this.loadDailyPhrases(),
                    this.loadChallengePhotos()
                ]);
                this.updateStats();
                this.renderCalendar();
            },
            
            async loadChallengePhotos() {
                const container = document.getElementById('challengePhotoGallery');
                
                if (!this.isConnected) {
                    container.innerHTML = '<div class="error">Sin conexi√≥n a la base de datos</div>';
                    return;
                }
                
                container.innerHTML = '<div class="loading">Cargando fotos de retos... üì∏</div>';
                
                try {
                    const { data, error } = await this.supabase
                        .from('fotos_retos')
                        .select('*')
                        .order('created_at', { ascending: false });
                    
                    if (error) throw error;
                    
                    this.challengePhotos = data || [];
                    this.displayChallengePhotos();
                    
                    console.log('‚úÖ Fotos de retos cargadas:', this.challengePhotos.length);
                    
                } catch (error) {
                    console.error('‚ùå Error cargando fotos de retos:', error);
                    container.innerHTML = '<div class="error">Error cargando fotos de retos</div>';
                }
            },

            async uploadChallengePhoto() {
                if (!this.isConnected) {
                    this.showMessage('‚ùå Sin conexi√≥n a la base de datos', 'error');
                    return;
                }
                
                const photoFile = document.getElementById('challengePhoto').files[0];
                const author = document.getElementById('challengeAuthor').value;
                const button = document.getElementById('uploadChallengeBtn');
                
                if (!photoFile) {
                    this.showMessage('Por favor, selecciona una foto para el reto üì∏', 'error');
                    return;
                }
                
                button.disabled = true;
                button.textContent = '‚è≥ Subiendo...';
                
                try {
                    const today = this.getChileDate();
                    const challenge = this.getTodayChallenge();
                    
                    // Subir imagen a Supabase Storage
                    const fileName = `${Date.now()}_${author}_${photoFile.name}`;
                    const { data: uploadData, error: uploadError } = await this.supabase.storage
                        .from('retos-fotos')
                        .upload(fileName, photoFile);
                    
                    if (uploadError) throw uploadError;
                    
                    // Obtener URL p√∫blica
                    const { data: urlData } = this.supabase.storage
                        .from('retos-fotos').getPublicUrl(fileName);
                    
                    // Guardar en base de datos
                    const { data, error } = await this.supabase
                        .from('fotos_retos')
                        .insert([{
                            author: author,
                            image_url: urlData.publicUrl,
                            challenge_text: challenge.text,
                            challenge_icon: challenge.icon,
                            challenge_date: this.formatDateChile(today)
                        }]);
                    
                    if (error) throw error;
                    
                    // Limpiar formulario
                    document.getElementById('challengePhoto').value = '';
                    document.getElementById('uploadPreview').innerHTML = '';
                    
                    this.showMessage('üéØ ¬°Reto completado exitosamente!', 'success');
                    
                } catch (error) {
                    console.error('‚ùå Error subiendo foto del reto:', error);
                    this.showMessage('‚ùå Error subiendo la foto', 'error');
                } finally {
                    button.disabled = false;
                    button.textContent = '‚ú® Completar Reto';
                }
            },
            
             openImageModal: function(urlImagen) {
    // Aqu√≠ abrimos el overlay
    const overlay = document.getElementById('overlay');
    const overlayImg = document.getElementById('overlay-image');
    const downloadBtn = document.getElementById('download-btn');
    overlayImg.src = urlImagen;
    downloadBtn.href = urlImagen;
    overlay.style.display = 'flex';
},
closeImageModal: function() {
    document.getElementById('overlay').style.display = 'none';
},   


            displayChallengePhotos() {
                const container = document.getElementById('challengePhotoGallery');
                
                if (this.challengePhotos.length === 0) {
                    container.innerHTML = '<div class="empty-state">No hay fotos de retos a√∫n. ¬°Completa el reto de hoy! üì∏</div>';
                    return;
                }
                
                // Filtrar fotos seg√∫n el filtro activo
                let filteredPhotos = this.challengePhotos;
                
                if (this.currentFilter === 'Nini' || this.currentFilter === 'Jota') {
                    filteredPhotos = this.challengePhotos.filter(photo => photo.author === this.currentFilter);
                } else if (this.currentFilter === 'recent') {
                    const lastWeek = new Date();
                    lastWeek.setDate(lastWeek.getDate() - 7);
                    filteredPhotos = this.challengePhotos.filter(photo => 
                        new Date(photo.created_at) > lastWeek
                    );
                }
                
                const html = filteredPhotos.map((photo, index) => `
                    <div class="challenge-photo-item" style="animation-delay: ${index * 0.1}s">
                        <img src="${photo.image_url}" 
     alt="Reto completado" 
     style="cursor:pointer;" 
     onclick="LoveApp.openImageModal('${photo.image_url}')"
     onerror="this.src='data:image/svg+xml;base64,...'" 
     loading="lazy">

                        <div class="challenge-photo-info">
                            <div class="challenge-photo-challenge">
                                ${photo.challenge_icon} ${photo.challenge_text}
                            </div>
                            <div class="challenge-photo-meta">
                                <span class="challenge-photo-author">${photo.author}</span>
                                <span class="challenge-photo-date">
                                    ${new Date(photo.created_at).toLocaleDateString('es-CL')}
                                </span>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                container.innerHTML = html;
            },

            filterChallengePhotos(filter) {
                // Actualizar botones activos
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`[onclick="LoveApp.filterChallengePhotos('${filter}')"]`).classList.add('active');
                
                this.currentFilter = filter;
                this.displayChallengePhotos();
            },
            
            async loadMessages() {
                const container = document.getElementById('messagesList');
                
                if (!this.isConnected) {
                    container.innerHTML = '<div class="error">Sin conexi√≥n a la base de datos</div>';
                    return;
                }
                
                container.innerHTML = '<div class="loading">Cargando mensajes de amor... üíï</div>';
                
                try {
                    const { data, error } = await this.supabase
                        .from('love_messages')
                        .select('*')
                        .order('created_at', { ascending: false })
                        .limit(20);
                    
                    if (error) throw error;
                    
                    this.messages = data || [];
                    
                    if (this.messages.length === 0) {
                        container.innerHTML = '<div class="empty-state">A√∫n no hay mensajes. ¬°Escribe el primero! üíï</div>';
                        return;
                    }
                    
                    const html = this.messages.map((message, index) => `
                        <div class="content-item" style="animation-delay: ${index * 0.1}s">
                            <div class="content-meta">
                                <span class="content-author">${message.author}</span>
                                <span class="content-time">${this.formatTimeAgo(message.created_at)}</span>
                            </div>
                            <div class="content-text">${message.message}</div>
                        </div>
                    `).join('');
                    
                    container.innerHTML = html;
                    console.log('‚úÖ Mensajes cargados:', this.messages.length);
                    
                } catch (error) {
                    console.error('‚ùå Error cargando mensajes:', error);
                    container.innerHTML = '<div class="error">Error cargando mensajes</div>';
                }
            },
            
            async loadMemories() {
                const container = document.getElementById('memoriesGrid');
                
                if (!this.isConnected) {
                    container.innerHTML = '<div class="error">Sin conexi√≥n a la base de datos</div>';
                    return;
                }
                
                container.innerHTML = '<div class="loading">Cargando recuerdos... üíï</div>';
                
                try {
                    const { data, error } = await this.supabase
                        .from('love_memories')
                        .select('*')
                        .order('created_at', { ascending: false })
                        .limit(20);
                    
                    if (error) throw error;
                    
                    this.memories = data || [];
                    
                    if (this.memories.length === 0) {
                        container.innerHTML = '<div class="empty-state">A√∫n no hay recuerdos. ¬°Sube el primero! üì∏</div>';
                        return;
                    }
                    
                    const html = this.memories.map((memory, index) => `
                        <div class="content-item" style="animation-delay: ${index * 0.1}s">
                            ${memory.image_url ? `<img src="${memory.image_url}" alt="${memory.title}" class="memory-image" loading="lazy" onerror="this.style.display='none'">` : ''}
                            <div class="content-meta">
                                <span class="content-author">${memory.author}</span>
                                <span class="content-time">${this.formatTimeAgo(memory.created_at)}</span>
                            </div>
                            <div class="content-text"><strong>${memory.title}</strong></div>
                        </div>
                    `).join('');
                    
                    container.innerHTML = html;
                    console.log('‚úÖ Recuerdos cargados:', this.memories.length);
                    
                } catch (error) {
                    console.error('‚ùå Error cargando recuerdos:', error);
                    container.innerHTML = '<div class="error">Error cargando recuerdos</div>';
                }
            },
            
            async loadDailyPhrases() {
                if (!this.isConnected) return;
                
                try {
                    const { data, error } = await this.supabase
                        .from('daily_phrases')
                        .select('*')
                        .order('phrase_date', { ascending: false });
                    
                    if (error) throw error;
                    
                    this.dailyPhrases = data || [];
                    this.renderCalendar(); // Re-renderizar calendario con las frases
                    
                    console.log('‚úÖ Frases diarias cargadas:', this.dailyPhrases.length);
                    
                } catch (error) {
                    console.error('‚ùå Error cargando frases diarias:', error);
                }
            },
            
            // ===== FUNCIONES PARA AGREGAR CONTENIDO =====
            async addMessage() {
                if (!this.isConnected) {
                    this.showMessage('‚ùå Sin conexi√≥n a la base de datos', 'error');
                    return;
                }
                
                const author = document.getElementById('messageAuthor').value;
                const messageText = document.getElementById('messageText').value.trim();
                const button = document.getElementById('addMessageBtn');
                
                if (!messageText) {
                    this.showMessage('Por favor, escribe un mensaje üíï', 'error');
                    return;
                }
                
                button.disabled = true;
                button.textContent = '‚è≥ Enviando...';
                
                try {
                    const { data, error } = await this.supabase
                        .from('love_messages')
                        .insert([{
                            author: author,
                            message: messageText
                        }]);
                    
                    if (error) throw error;
                    
                    document.getElementById('messageText').value = '';
                    this.showMessage('üíï ¬°Mensaje enviado con amor!', 'success');
                    
                } catch (error) {
                    console.error('‚ùå Error agregando mensaje:', error);
                    this.showMessage('‚ùå Error enviando mensaje', 'error');
                } finally {
                    button.disabled = false;
                    button.textContent = '‚ú® Enviar Mensaje';
                }
            },
            
            async addMemory() {
                if (!this.isConnected) {
                    this.showMessage('‚ùå Sin conexi√≥n a la base de datos', 'error');
                    return;
                }
                
                const author = document.getElementById('memoryAuthor').value;
                const title = document.getElementById('memoryTitle').value.trim();
                const imageFile = document.getElementById('memoryImage').files[0];
                const button = document.getElementById('addMemoryBtn');
                
                if (!title) {
                    this.showMessage('Por favor, escribe un t√≠tulo para el recuerdo üì∏', 'error');
                    return;
                }
                
                button.disabled = true;
                button.textContent = '‚è≥ Guardando...';
                
                try {
                    let imageUrl = null;
                    
                    // Subir imagen si existe
                    if (imageFile) {
                        const fileName = `${Date.now()}_${author}_${imageFile.name}`;
                        const { data: uploadData, error: uploadError } = await this.supabase.storage
                            .from('recuerdos')
                            .upload(fileName, imageFile);
                        
                        if (uploadError) throw uploadError;
                        
                        const { data: urlData } = this.supabase.storage
                            .from('recuerdos')
                            .getPublicUrl(fileName);
                        
                        imageUrl = urlData.publicUrl;
                    }
                    
                    // Guardar recuerdo
                    const { data, error } = await this.supabase
                        .from('love_memories')
                        .insert([{
                            author: author,
                            title: title,
                            image_url: imageUrl
                        }]);
                    
                    if (error) throw error;
                    
                    // Limpiar formulario
                    document.getElementById('memoryTitle').value = '';
                    document.getElementById('memoryImage').value = '';
                    
                    this.showMessage('üì∏ ¬°Recuerdo guardado con amor!', 'success');
                    
                } catch (error) {
                    console.error('‚ùå Error agregando recuerdo:', error);
                    this.showMessage('‚ùå Error guardando recuerdo', 'error');
                } finally {
                    button.disabled = false;
                    button.textContent = '‚ú® Guardar Recuerdo';
                }
            },
            
            // ===== FUNCIONES DEL CALENDARIO =====
            renderCalendar() {
                const grid = document.getElementById('calendarGrid');
                const monthYear = document.getElementById('calendarMonthYear');
                const turnInfo = document.getElementById('calendarTurnInfo');
                
                // Mantener encabezados de d√≠as
                const headers = grid.querySelectorAll('.calendar-day-header');
                grid.innerHTML = '';
                headers.forEach(header => grid.appendChild(header));
                
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                
                // Actualizar t√≠tulo
                monthYear.textContent = this.currentDate.toLocaleDateString('es-CL', {
                    month: 'long',
                    year: 'numeric'
                });
                
                // Calcular d√≠as del mes
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());
                
                const today = this.getChileDate();
                
                // Calcular de qui√©n es el turno hoy
                const todayTurn = this.getTurnForDate(today);
                turnInfo.innerHTML = `üåü Hoy le toca a: <strong style="color: ${todayTurn === 'Nini' ? 'var(--primary-pink)' : 'var(--accent-blue)'};">${todayTurn}</strong>`;
                
                // Generar d√≠as
                for (let i = 0; i < 42; i++) {
                    const date = new Date(startDate);
                    date.setDate(startDate.getDate() + i);
                    
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = date.getDate();
                    
                    // Clases CSS
                    if (date.getMonth() !== month) {
                        dayElement.classList.add('other-month');
                    }
                    
                    if (this.isSameDay(date, today)) {
                        dayElement.classList.add('today');
                    }
                    
                    // Verificar si hay frase para este d√≠a
                    const dateString = this.formatDateChile(date);
                    const hasPhrase = this.dailyPhrases.some(phrase => phrase.phrase_date === dateString);
                    if (hasPhrase) {
                        dayElement.classList.add('has-phrase');
                    }
                    
                    // Agregar indicador de turno solo si no es otro mes
                    if (date.getMonth() === month) {
                        const turn = this.getTurnForDate(date);
                        dayElement.classList.add(`${turn.toLowerCase()}-turn`);
                    }
                    
                    // Evento click
                    dayElement.addEventListener('click', () => this.openPhraseModal(date));
                    
                    grid.appendChild(dayElement);
                }
            },
            
            getTurnForDate(date) {
                // Alternar turnos cada d√≠a, empezando con Nini
                const daysSinceStart = Math.floor((date - this.relationshipStart) / (1000 * 60 * 60 * 24));
                return daysSinceStart % 2 === 0 ? 'Nini' : 'Jota';
            },
            
            changeMonth(direction) {
                this.currentDate.setMonth(this.currentDate.getMonth() + direction);
                this.renderCalendar();
            },
            
            // ===== MODAL DE FRASES DIARIAS =====
            openPhraseModal(date) {
                this.selectedDate = date;
                const modal = document.getElementById('phraseModal');
                const title = document.getElementById('phraseModalTitle');
                const modalDate = document.getElementById('phraseModalDate');
                const turnInfo = document.getElementById('phraseModalTurn');
                const phraseDisplay = document.getElementById('phraseDisplay');
                const phraseForm = document.getElementById('phraseForm');
                const saveButton = document.getElementById('savePhraseBtn');
                
                // Configurar modal
                title.textContent = 'Frase del D√≠a';
                modalDate.textContent = date.toLocaleDateString('es-CL', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                const turn = this.getTurnForDate(date);
                const today = this.getChileDate();
                const isToday = this.isSameDay(date, today);
                const isFuture = date > today;
                
                turnInfo.innerHTML = `Es el turno de: <strong style="color: ${turn === 'Nini' ? 'var(--primary-pink)' : 'var(--accent-blue)'};">${turn}</strong>`;
                
                // Verificar si ya hay frase
                const dateString = this.formatDateChile(date);
                const existingPhrase = this.dailyPhrases.find(phrase => phrase.phrase_date === dateString);
                
                if (existingPhrase) {
                    // Mostrar frase existente
                    phraseDisplay.innerHTML = `
                        <div class="phrase-display">
                            <div class="phrase-text">${existingPhrase.phrase_text}</div>
                            <div class="phrase-author">- ${existingPhrase.author}</div>
                        </div>
                    `;
                    phraseDisplay.style.display = 'block';
                    phraseForm.style.display = 'none';
                    saveButton.style.display = 'none';
                } else {
                    // Mostrar formulario
                    phraseDisplay.style.display = 'none';
                    
                    if (isFuture) {
                        phraseForm.innerHTML = '<div class="phrase-display" style="text-align: center; color: var(--medium-text);">üîÆ Este d√≠a a√∫n no ha llegado. ¬°Vuelve cuando sea el momento!</div>';
                        saveButton.style.display = 'none';
                    } else {
                        phraseForm.style.display = 'block';
                        saveButton.style.display = 'block';
                        document.getElementById('phraseText').value = '';
                    }
                }
                
                modal.classList.add('show');
            },
            
            closePhraseModal() {
                const modal = document.getElementById('phraseModal');
                modal.classList.remove('show');
                this.selectedDate = null;
            },
            
            async saveDailyPhrase() {
                if (!this.isConnected) {
                    this.showMessage('‚ùå Sin conexi√≥n a la base de datos', 'error');
                    return;
                }
                
                if (!this.selectedDate) return;
                
                const phraseText = document.getElementById('phraseText').value.trim();
                const button = document.getElementById('savePhraseBtn');
                
                if (!phraseText) {
                    this.showMessage('Por favor, escribe una frase bonita üíï', 'error');
                    return;
                }
                
                // Verificar que sea el turno correcto
                const expectedTurn = this.getTurnForDate(this.selectedDate);
                const today = this.getChileDate();
                
                if (!this.isSameDay(this.selectedDate, today)) {
                    this.showMessage('Solo puedes escribir la frase del d√≠a actual üìÖ', 'error');
                    return;
                }
                
                button.disabled = true;
                button.textContent = '‚è≥ Guardando...';
                
                try {
                    const { data, error } = await this.supabase
                        .from('daily_phrases')
                        .insert([{
                            author: expectedTurn,
                            phrase_text: phraseText,
                            phrase_date: this.formatDateChile(this.selectedDate)
                        }]);
                    
                    if (error) throw error;
                    
                    this.closePhraseModal();
                    this.showMessage('üíï ¬°Frase guardada con amor!', 'success');
                    
                } catch (error) {
                    console.error('‚ùå Error guardando frase:', error);
                    this.showMessage('‚ùå Error guardando frase', 'error');
                } finally {
                    button.disabled = false;
                    button.textContent = '‚ú® Guardar Frase';
                }
            },
            
            // ===== FUNCIONES AUXILIARES =====
            updateStats() {
                const daysTogether = Math.floor((this.getChileDate() - this.relationshipStart) / (1000 * 60 * 60 * 24));
                
                document.getElementById('daysTogether').textContent = daysTogether;
                document.getElementById('totalMemories').textContent = this.memories.length;
                document.getElementById('totalMessages').textContent = this.messages.length;
                document.getElementById('totalPhrases').textContent = this.dailyPhrases.length;
                document.getElementById('totalChallenges').textContent = this.challengePhotos.length;
            },
            
            updateConnectionStatus(message, isConnected) {
                const status = document.getElementById('connectionStatus');
                status.textContent = message;
                status.className = `connection-status ${isConnected ? '' : 'offline'}`;
            },
            
            updateClock() {
                const now = this.getChileDate();
                const clock = document.getElementById('clock');
                const date = document.getElementById('date');
                
                clock.textContent = now.toLocaleTimeString('es-CL');
                date.textContent = now.toLocaleDateString('es-CL', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            },
            
            formatTimeAgo(dateString) {
                const date = new Date(dateString);
                const now = this.getChileDate();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / 60000);
                const diffHours = Math.floor(diffMs / 3600000);
                const diffDays = Math.floor(diffMs / 86400000);
                
                if (diffMins < 1) return 'Ahora mismo';
                if (diffMins < 60) return `Hace ${diffMins} min`;
                if (diffHours < 24) return `Hace ${diffHours}h`;
                if (diffDays < 7) return `Hace ${diffDays} d√≠as`;
                return date.toLocaleDateString('es-CL');
            },
            
            showMessage(message, type = 'success') {
                // Crear elemento de mensaje
                const messageEl = document.createElement('div');
                messageEl.className = `${type} fade-in`;
                messageEl.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 10001;
                    max-width: 300px;
                    animation: slideIn 0.3s ease;
                `;
                messageEl.textContent = message;
                
                document.body.appendChild(messageEl);
                
                // Remover despu√©s de 4 segundos
                setTimeout(() => {
                    messageEl.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => messageEl.remove(), 300);
                }, 4000);
            },
            
            // ===== EFECTOS VISUALES =====
            createAnimatedBackground() {
                const bg = document.getElementById('animatedBg');
                
                // Crear corazones flotantes cada cierto tiempo
                setInterval(() => this.createFloatingHeart(), 8000);
            },
            
            createFloatingHeart() {
                const bg = document.getElementById('animatedBg');
                const heart = document.createElement('div');
                
                const hearts = ['üíñ', 'üíï', 'üíó', 'üíù', 'üíò', '‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú'];
                const randomHeart = hearts[Math.floor(Math.random() * hearts.length)];
                
                heart.className = 'floating-heart';
                heart.textContent = randomHeart;
                heart.style.cssText = `
                    left: ${Math.random() * 100}%;
                    font-size: ${1 + Math.random()}rem;
                    animation-duration: ${10 + Math.random() * 10}s;
                `;
                
                bg.appendChild(heart);
                
                // Remover despu√©s de la animaci√≥n
                setTimeout(() => heart.remove(), 20000);
            },
            
            addEntryAnimations() {
                const cards = document.querySelectorAll('.fade-in');
                cards.forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                });
            },
            
            showSetupInstructions() {
                console.log(`
üöÄ CONFIGURACI√ìN INICIAL - LOVE APP
=====================================

Para que la aplicaci√≥n funcione correctamente, necesitas:

1. Crear un proyecto en Supabase (https://supabase.com)
2. Crear las siguientes tablas en tu base de datos:

CREATE TABLE love_messages (
    id SERIAL PRIMARY KEY,
    author TEXT NOT NULL,
    message TEXT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);

CREATE TABLE love_memories (
    id SERIAL PRIMARY KEY,
    author TEXT NOT NULL,
    title TEXT NOT NULL,
    image_url TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);

CREATE TABLE daily_phrases (
    id SERIAL PRIMARY KEY,
    author TEXT NOT NULL,
    phrase_text TEXT NOT NULL,
    phrase_date DATE NOT NULL UNIQUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);

CREATE TABLE fotos_retos (
    id SERIAL PRIMARY KEY,
    author TEXT NOT NULL,
    image_url TEXT NOT NULL,
    challenge_text TEXT NOT NULL,
    challenge_icon TEXT NOT NULL,
    challenge_date DATE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);

3. Crear buckets de almacenamiento:
   - 'recuerdos' (para fotos de recuerdos)
   - 'retos-fotos' (para fotos de retos)

4. Configurar las pol√≠ticas RLS seg√∫n tus necesidades

5. Reemplazar las credenciales en la funci√≥n initializeSupabase()

‚ú® ¬°Una vez configurado, tendr√°s una aplicaci√≥n de amor completamente funcional!
                `);
            }
        };

        // ===== EVENTOS GLOBALES =====
        // Cerrar modal al hacer clic fuera
        document.addEventListener('click', (e) => {
            const modal = document.getElementById('phraseModal');
            if (e.target === modal) {
                LoveApp.closePhraseModal();
            }
        });

        // Cerrar modal con ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                LoveApp.closePhraseModal();
            }
        });

        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', () => {
            LoveApp.init();
        });

        // Estilos adicionales para animaciones
        const additionalStyles = document.createElement('style');
        additionalStyles.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(additionalStyles);
        // Funci√≥n para abrir el overlay con la imagen grande
// Mostrar overlay con imagen
function abrirOverlayConImagen(urlImagen) {
  const overlay = document.getElementById('overlay');
  const overlayImg = document.getElementById('overlay-image');
  const downloadBtn = document.getElementById('download-btn');
  overlayImg.src = urlImagen;
  downloadBtn.href = urlImagen;
  overlay.style.display = 'flex';
}



document.getElementById('overlay').addEventListener('click', function(e) {
  if (e.target.id === 'overlay') {
    this.style.display = 'none';
  }
});


    </script>
</body>
</html>
